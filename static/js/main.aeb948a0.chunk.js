(this["webpackJsonpgithub-portfolio"]=this["webpackJsonpgithub-portfolio"]||[]).push([[0],{20:function(e,i,t){},21:function(e,i,t){},27:function(e,i,t){},29:function(e,i,t){},30:function(e,i,t){},31:function(e,i,t){"use strict";t.r(i);var s=t(4),o=t.n(s),r=t(10),a=t.n(r),l=(t(20),t(14)),n=t(6),c=t(11),u=t(12),d=t(5),b=t(15),h=t(13),m=(t(21),t(2)),p=t(3),f=(t(27),t(0));var j=function(e){console.log("Profile",{props:e});var i=e.login,t=e.avatar_url,s=e.html_url,o=e.company,r=e.name,a=e.location,l=e.bio,n=e.handleBackClick,c=e.hireable,u=e.email,d={backgroundImage:"url(".concat(t,")")};return Object(f.jsxs)("article",{className:"Profile",children:[Object(f.jsx)("div",{className:"avatar",style:d}),Object(f.jsxs)("div",{className:"Profile-description",children:[r?Object(f.jsx)("div",{className:"username",children:r}):null,i?Object(f.jsx)("a",{href:s,children:Object(f.jsxs)("div",{className:"login",children:["@",i]})}):null,l?Object(f.jsx)("div",{className:"bio",children:l}):null]}),Object(f.jsxs)("div",{className:"Profile-status",children:[u&&Object(f.jsxs)("div",{className:"email",children:[Object(f.jsx)(m.a,{icon:p.b}),"\xa0",u]}),c&&Object(f.jsxs)("div",{className:"hireable",children:[Object(f.jsx)(m.a,{icon:p.f}),"\xa0En recherche d'emploi"]}),o?Object(f.jsxs)("div",{className:"company",children:[Object(f.jsx)(m.a,{icon:p.i}),"\xa0",o]}):null,a?Object(f.jsxs)("div",{className:"location",children:[Object(f.jsx)(m.a,{icon:p.e}),"\xa0",a]}):null]}),Object(f.jsx)("div",{className:"Profile-links",children:Object(f.jsx)("a",{href:"javascript:void(0)",className:"active",children:"Repositories"})}),Object(f.jsx)("div",{className:"Profile-footer",children:Object(f.jsx)("button",{onClick:n,children:"Back"})})]})};t(29),t(30);var v=function(e){var i=e.name,t=e.description,s=e.language,o=e.stargazers_count,r=e.forks,a=e.html_url,l=e.handleRepositoryClick,n=e.fork,c=e.private;return Object(f.jsxs)("article",{className:"Repository","data-url":a,onClick:l,"data-is-fork":n,children:[Object(f.jsxs)("div",{className:"Repository-labels",children:[n?Object(f.jsxs)("span",{className:"Repository-labels-fork",children:[Object(f.jsx)(m.a,{icon:p.d}),"\xa0Fork"]}):null,c?Object(f.jsxs)("span",{className:"Repository-labels-private",children:[Object(f.jsx)(m.a,{icon:p.h}),"\xa0Private"]}):null]}),Object(f.jsx)("span",{className:"Repository-name",children:i}),Object(f.jsx)("span",{className:"Repository-description",children:t}),Object(f.jsxs)("div",{className:"Repository-infos",children:[Object(f.jsxs)("span",{className:"Repository-infos-language",children:[Object(f.jsx)(m.a,{icon:p.c}),"\xa0",s]}),Object(f.jsxs)("span",{className:"Repository-infos-stars",children:[Object(f.jsx)(m.a,{icon:p.g}),"\xa0",o]}),Object(f.jsxs)("span",{className:"Repository-infos-stars",children:[Object(f.jsx)(m.a,{icon:p.d}),"\xa0",r]})]})]})};var g=function(e){var i=e.repositories,t=e.handleRepositoryClick;return i||(i=[]),"string"===typeof i&&(i=JSON.parse(i)),Object(f.jsx)("section",{className:"Repositories",children:0<i.length?i.map((function(e){return Object(f.jsx)(v,Object(n.a)(Object(n.a)({},e),{},{handleRepositoryClick:t}),e.id)})):Object(f.jsx)("article",{children:"No repository found"})})},O=function(e){Object(b.a)(t,e);var i=Object(h.a)(t);function t(e){var s;return Object(c.a)(this,t),(s=i.call(this,e)).state={gists:localStorage.getItem(t.KEY_GISTS_CACHE),profile:localStorage.getItem(t.KEY_PROFILE_CACHE),repositories:localStorage.getItem(t.KEY_REPOSITORIES_CACHE),repositoriesVisibility:localStorage.getItem(t.KEY_REPOSITORIES_VISIBILITY_CACHE)},s.updateProfile=s.updateProfile.bind(Object(d.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(d.a)(s)),s.handleRepositoryClick=s.handleRepositoryClick.bind(Object(d.a)(s)),s.handleRepositoriesVisibilityClick=s.handleRepositoriesVisibilityClick.bind(Object(d.a)(s)),s}return Object(u.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",t.handleDocumentKeypress,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",t.handleDocumentKeypress,!1)}},{key:"render",value:function(){var e=this.state,i=e.profile,s=e.repositories;return Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)("section",{className:"App-section",children:[Object(f.jsx)("section",{className:"App-section-main show",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsxs)("h1",{children:["Select a github profile",Object(f.jsx)("br",{}),"to generate a portfolio"]}),Object(f.jsxs)("form",{action:"#",name:"github-profile",children:[Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("input",{type:"text",name:"username",id:"username",placeholder:" "}),Object(f.jsx)("label",{htmlFor:"username",children:"Pseudo Github"})]}),Object(f.jsx)("button",{type:"submit",name:"submit_github_profile",onClick:this.handleSubmit,children:Object(f.jsx)(m.a,{icon:p.a})}),Object(f.jsxs)("aside",{className:"error-helper-wrapper",children:[Object(f.jsx)("small",{className:"error-helper","aria-labelledby":"unknown-user",children:"Unknown user"}),Object(f.jsx)("small",{className:"error-helper","aria-labelledby":"invalid-username",children:"Invalid username"}),Object(f.jsx)("small",{className:"error-helper","aria-labelledby":"api-rate-limit-exceeded",children:"API rate limit exceeded"})]})]}),Object(f.jsx)("div",{className:"App-section-main-loading-wrapper"})]})}),Object(f.jsxs)("section",{className:"App-section-portfolio hide",children:[Object(f.jsx)("aside",{className:"App-section-portfolio-profile",children:Object(f.jsx)(j,Object(n.a)(Object(n.a)({},i),{},{handleBackClick:t.handleBackClick}))}),Object(f.jsxs)("section",{className:"App-section-portfolio-repositories",children:[Object(f.jsxs)("header",{className:"App-section-portfolio-repositories-header",children:[Object(f.jsx)("h2",{children:"Repositories"}),Object(f.jsx)("div",{className:"App-section-portfolio-repositories-actions",children:Object(f.jsxs)("div",{className:"list-button","data-name":"repositories-visibility",children:[Object(f.jsx)("button",{className:"active","data-value":"all",onClick:this.handleRepositoriesVisibilityClick,children:"All"}),Object(f.jsx)("button",{"data-value":"owns",onClick:this.handleRepositoriesVisibilityClick,children:"Owns"}),Object(f.jsx)("button",{"data-value":"forks",onClick:this.handleRepositoriesVisibilityClick,children:"Forks"})]})})]}),Object(f.jsx)(g,{repositories:s,handleRepositoryClick:this.handleRepositoryClick})]})]})]})})}},{key:"handleSubmit",value:function(e){var i=this;if(e.preventDefault(),!1!==t.isEnableSubmitInFormGithubProfile()){t.disableSubmitInFormGithubProfile();var s=document.forms["github-profile"].elements.username.value;if(!s)return t.handleErrorInvalidUsername(),void t.enableSubmitInFormGithubProfile();t.setLoadingMessage("Retrieving github profile");var o="https://api.github.com/users/".concat(s);fetch(o).then((function(e){return e.json()})).then((function(e){var s=e.message;if(s&&"Not Found"===s)return t.handleErrorUnknownUser(),t.setLoadingMessage(""),void t.enableSubmitInFormGithubProfile();if(console.log("gooo",{message:s,foo:!!s&&s.toLowerCase().includes("api rate limit exceeded for")}),s&&s.toLowerCase().includes("api rate limit exceeded for"))return t.handleErrorAPIRateLimitExceeded(),t.setLoadingMessage(""),void t.enableSubmitInFormGithubProfile();t.removeClassHasErrorForFormGithubProfile(),i.updateProfile(e);var o=e.repos_url,r=e.gists_url;r&&"string"===typeof r&&(r=r.replace("{/gist_id}","")),t.setLoadingMessage("Retrieving repositories"),fetch(o).then((function(e){return e.json()})).then((function(e){i.updateRepositories(e),t.setLoadingMessage("Retrieving gists"),fetch(r).then((function(e){return e.json()})).then((function(e){i.updateGists(e),t.setLoadingMessage(""),t.enableSubmitInFormGithubProfile(),t.showPortfolioSection()})).catch((function(e){console.error(e),t.setLoadingMessage(""),t.enableSubmitInFormGithubProfile()}))})).catch((function(e){console.error(e),t.setLoadingMessage(""),t.enableSubmitInFormGithubProfile()}))})).catch((function(e){console.error(e),t.setLoadingMessage(""),t.enableSubmitInFormGithubProfile()})).finally((function(){}))}}},{key:"handleRepositoryClick",value:function(e){e.preventDefault();var i=e.target;i.classList.contains("Repository")||(i=i.closest(".Repository"));var t=i.dataset.url;window.location.href=t}},{key:"handleRepositoriesVisibilityClick",value:function(e){e.preventDefault();var i=e.target,s=i.dataset.value,o=i.closest(".list-button").querySelector("button.active");o&&o.classList.remove("active"),i.classList.add("active"),this.updateRepositoriesVisibility(s),t.toggleRepositoriesVisibility()}},{key:"updateProfile",value:function(e){console.log("App : updateProfile()",{profile:e}),e||(e={}),localStorage.setItem(t.KEY_PROFILE_CACHE,JSON.stringify(e)),this.setState({profile:e})}},{key:"updateRepositories",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("App : updateRepositories()",{repositories:e}),e||(e={}),localStorage.setItem(t.KEY_REPOSITORIES_CACHE,JSON.stringify(e)),this.setState({repositories:e})}},{key:"updateGists",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("App : updateGists()",{gists:e}),e||(e={}),localStorage.setItem(t.KEY_GISTS_CACHE,JSON.stringify(e)),this.setState({gists:e})}},{key:"updateRepositoriesVisibility",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";console.log("App : updateRepositoriesVisibility()",{repositoriesVisibility:e}),localStorage.setItem(t.KEY_REPOSITORIES_VISIBILITY_CACHE,e),this.setState({repositoriesVisibility:e})}}],[{key:"showPortfolioSection",value:function(){var e=document.querySelector(".App-section-portfolio");e.classList.add("show"),e.classList.remove("hide"),document.querySelector(".App-section-main").classList.add("hide"),e.scroll({top:0}),t.clickOnRepositoriesVisibilityAll()}},{key:"showMainSection",value:function(){var e=document.querySelector(".App-section-main");e.classList.add("show"),e.classList.remove("hide"),document.querySelector(".App-section-portfolio").classList.add("hide")}},{key:"handleDocumentKeypress",value:function(e){27===e.keyCode&&t.showMainSection()}},{key:"toggleRepositoriesVisibility",value:function(){var e=localStorage.getItem(t.KEY_REPOSITORIES_VISIBILITY_CACHE);if(e){var i,s=document.querySelectorAll(".Repository"),o=Object(l.a)(s);try{for(o.s();!(i=o.n()).done;){var r=i.value,a=r.dataset.isFork;"owns"!==e||"true"!==a?"forks"!==e||"false"!==a?r.classList.remove("hide"):r.classList.add("hide"):r.classList.add("hide")}}catch(n){o.e(n)}finally{o.f()}}}},{key:"handleErrorUnknownUser",value:function(){t.removeClassHasErrorForFormGithubProfile("invalid-username"),t.removeClassHasErrorForFormGithubProfile("api-rate-limit-exceeded"),t.addClassHasErrorForFormGithubProfile("unknown-user")}},{key:"handleErrorAPIRateLimitExceeded",value:function(){t.removeClassHasErrorForFormGithubProfile("invalid-username"),t.removeClassHasErrorForFormGithubProfile("unknown-user"),t.addClassHasErrorForFormGithubProfile("api-rate-limit-exceeded")}},{key:"handleErrorInvalidUsername",value:function(){t.removeClassHasErrorForFormGithubProfile("unknown-user"),t.removeClassHasErrorForFormGithubProfile("api-rate-limit-exceeded"),t.addClassHasErrorForFormGithubProfile("invalid-username")}},{key:"addClassHasErrorForFormGithubProfile",value:function(e){var i=document.forms["github-profile"];i.classList.add("has-error"),i.classList.add("has-error-"+e),setTimeout((function(){i.classList.remove("has-error"),i.classList.remove("has-error-"+e)}),3e3)}},{key:"removeClassHasErrorForFormGithubProfile",value:function(){var e=document.forms["github-profile"];e.classList.remove("has-error"),e.classList.remove("has-error-unknown-user"),e.classList.remove("has-error-invalid-username"),e.classList.remove("has-error-api-rate-limit-exceeded")}},{key:"disableSubmitInFormGithubProfile",value:function(){document.forms["github-profile"].elements.submit_github_profile.setAttribute("disabled","disabled")}},{key:"enableSubmitInFormGithubProfile",value:function(){document.forms["github-profile"].elements.submit_github_profile.removeAttribute("disabled")}},{key:"isEnableSubmitInFormGithubProfile",value:function(){return!1===document.forms["github-profile"].elements.submit_github_profile.hasAttribute("disabled")}},{key:"handleBackClick",value:function(e){e.preventDefault(),t.showMainSection()}},{key:"setLoadingMessage",value:function(e){document.querySelector(".App-section-main-loading-wrapper").innerHTML=e}},{key:"clickOnRepositoriesVisibilityAll",value:function(){document.querySelector('.list-button[data-name="repositories-visibility"]').querySelector('button[data-value="all"]').click()}}]),t}(o.a.Component);O.KEY_GISTS_CACHE="github_portfolio_gists_cache",O.KEY_PROFILE_CACHE="github_portfolio_profile_cache",O.KEY_REPOSITORIES_CACHE="github_portfolio_repositories_cache",O.KEY_REPOSITORIES_VISIBILITY_CACHE="github_portfolio_repositories_visibility_cache";var y=O,k=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,32)).then((function(i){var t=i.getCLS,s=i.getFID,o=i.getFCP,r=i.getLCP,a=i.getTTFB;t(e),s(e),o(e),r(e),a(e)}))};a.a.render(Object(f.jsx)(o.a.StrictMode,{children:Object(f.jsx)(y,{})}),document.getElementById("root")),k()}},[[31,1,2]]]);
//# sourceMappingURL=main.aeb948a0.chunk.js.map